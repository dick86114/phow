# 个人摄影分享网站 (Phow) 开发计划

本项目旨在打造一个集摄影作品展示、每日习惯养成及家庭私密分享于一体的现代化平台。

## 技术栈选型
- **前端**: Vue 3 (Composition API) + Vite + Tailwind CSS + Pinia
- **后端**: Node.js (NestJS) + Prisma ORM
- **数据库**: PostgreSQL
- **图片处理**: Sharp (压缩、缩略图、EXIF 解析)
- **存储**: 本地存储 + 阿里云 OSS (CDN 加速)

## 核心功能模块划分

### 1. 基础架构与鉴权
- **后端初始化**: 配置 NestJS 基础环境，集成 Prisma。
- **用户系统**: 实现管理员与家庭成员角色。采用 JWT 进行身份验证，bcrypt 加密存储。
- **安全防护**: 集成 Helmet、Rate Limit，防止 SQL 注入、XSS 和暴力破解。

### 2. 照片管理与自动化流 (MVP)
- **拖拽上传**: 实现支持多文件批量上传（最多 20 张）的交互组件。
- **自动解析**: 上传时后端使用 `exif-reader` 自动提取光圈、快门、ISO 等元数据。
- **智能压缩**: 自动生成原图、WebP 压缩图及多尺寸缩略图。
- **分类系统**: 支持按日期归档、主题分类及自定义标签。

### 3. 响应式前端展示
- **瀑布流画廊**: 实现自适应宽度的瀑布流布局，支持懒加载和无限滚动。
- **沉浸式详情页**: 
    - 大图展示（支持全屏、旋转、5倍滚轮缩放）。
    - 拍摄参数（EXIF）信息卡片。
    - 富文本摄影故事展示。
- **习惯日历**: 侧边栏展示类似 GitHub 贡献图的摄影习惯记录。

### 4. 社交互动与搜索 (v1.1)
- **点赞系统**: 实现基于 IP + Cookie 双重校验的限流点赞功能。
- **嵌套评论**: 支持多级回复，管理员可一键审核与回复。
- **高级搜索**: 支持关键词、日期范围、拍摄器材及地理位置检索。

### 5. 运维与优化
- **自动化备份**: 每日凌晨 2 点执行数据库与图片全量备份。
- **SEO 优化**: 注入 Meta 标签、生成 Sitemap 及 Open Graph 协议支持。
- **访问统计**: 集成数据可视化图表，分析热门照片及访客来源。

## 实施阶段
1. **第一阶段 (初始化)**: 搭建前后端基础架构，完成数据库建模与鉴权。
2. **第二阶段 (内容流)**: 实现照片上传、自动处理与瀑布流展示核心逻辑。
3. **第三阶段 (互动与增强)**: 完善评论、搜索、日历及点赞功能。
4. **第四阶段 (部署与优化)**: 接入 CDN，配置备份脚本，完成 SEO 与性能报告。

---
请确认以上计划，我将立即开始执行。