# Phow (个人摄影分享与习惯养成平台) 产品需求文档 (PRD)

**版本:** v1.1 (AI Enhanced)
**日期:** 2026-02-03
**状态:** 正式版

---

## 1. 项目背景
Phow 是一个专注于摄影作品展示与习惯养成的个人平台。v1.1 版本引入了 AI 大模型能力，实现了自动化的元数据提取、情感故事生成，并优化了用户体验（热力图、主题切换）。

## 2. 核心功能更新 (v1.1)

### 2.1 AI 智能增强
- **大模型集成:** 对接 OpenAI 兼容接口（如智谱 GLM-4v）。
- **智能元数据提取:** 当 EXIF 缺失或无法读取时（如经过编辑的图片或特定机型），利用 AI 识别画面中的水印信息（镜头、参数）进行补充。
- **情感故事生成:** 自动为每张照片生成 30 字以内的情感共鸣文案，替代传统的枯燥描述。
- **管理端集成:** 上传页面和编辑页面均提供 AI 识别入口。

### 2.2 交互与展示优化
- **习惯养成热力图:**
  - 首页展示日历热力图，可视化每日创作频率。
  - **交互升级:** 悬停显示具体数量，点击日期可筛选当天的所有照片。
- **主题切换:** 支持浅色、深色及跟随系统模式。
- **详情页优化:**
  - 默认加载缩略图，提升首屏速度。
  - 提供“原图下载”按钮。
  - 移除“描述”字段，统一使用“故事”字段。

### 2.3 管理功能
- **权限管理:** 管理员拥有最高权限，可删除、编辑照片。
- **登录优化:** 完善的错误提示机制。
- **品牌定制:** 自定义 Logo、Favicon 及浏览器标题（今天拍什么）。

## 3. 用户角色

| 角色 | 权限 |
| :--- | :--- |
| **管理员** | 上传/编辑/删除照片、使用 AI 识别、管理用户、查看所有私密照片。 |
| **访客** | 查看公开照片、切换主题、使用热力图筛选、查看照片详情。 |

## 4. 数据模型变更

### Photos 表
- 新增 `story` 字段：存储 AI 生成的情感文案。
- 移除 `description` 字段（UI层面隐藏或逐步废弃）。
- 完善 `exif` 字段存储结构，支持 AI 补充的数据。

## 5. 技术架构
- **前端:** Vue 3 + Vite + TailwindCSS + Pinia (PWA 支持)。
- **后端:** NestJS + Prisma + PostgreSQL。
- **部署:** Docker Compose 一键部署，配置与代码分离。
